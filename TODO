TODO:
* Rewrite the tests using a sample merb app.
* Validate options
* Cleanup internal methods, so they can be overriden by the user
* Make sure all options make sense. 
* Add passing a symbol to some options, besides lambdas, and that will call the corresponding method
* Documentation.